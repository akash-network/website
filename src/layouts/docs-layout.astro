---
import Header from "@/components/docs/header.astro";
import MarketingHeader from "@/components/header/header.astro";

import Footer from "@/components/docs/footer.astro";
import Sidebar from "@/components/docs/sidebar.astro";
import { getCollection } from "astro:content";

import { generateDocsNav } from "@/lib/docs/generate-nav/docs-nav.ts";
import "@fontsource-variable/jetbrains-mono";
import BaseLayout from "./base-layout.astro";
interface Props {
  title: string;
  description?: string;
  image?: string;
}

const { title, description, image } = Astro.props;

const pages = await getCollection("Docs");
let nav = generateDocsNav(pages);
---

<BaseLayout title={title} description={description} image={image}>
  <div class="lg:hidden">
    <MarketingHeader disableSticky />
  </div>

  <div class="flex min-h-screen flex-col">
    <!-- Header at top (full width) -->
    <div class="sticky top-0 z-20 hidden bg-white dark:bg-background lg:block">
      <Header nav={nav} />
    </div>

    <!-- Below header: Sidebar on left, Content on right -->
    <div class="flex flex-1">
      <div
        class="hidden border-r border-[#e6e8eb] bg-white dark:border-[#333] dark:bg-background md:block"
      >
        <Sidebar nav={nav} />
      </div>

      <div
        class="flex flex-1 flex-col"
        style="min-width: 0; max-width: 100%; overflow-x: hidden;"
      >
        <main
          class="flex-1"
          style="min-width: 0; max-width: 100%; overflow-x: hidden;"
        >
          <div
            class="mx-auto pb-10"
            style="min-width: 0; max-width: 100%; overflow-x: hidden;"
          >
            <slot />
          </div>
        </main>

        <Footer />
      </div>
    </div>
  </div>
</BaseLayout>
