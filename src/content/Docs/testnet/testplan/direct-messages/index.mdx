---
categories: ["Testnet"]
tags: ["Testnet", "BME", "Testing", "Direct Operations"]
title: "Direct Message Operations"
linkTitle: "Direct Messages"
description: "Test direct mint/burn commands (MsgMintACT, MsgBurnACT, MsgBurnMint)"
weight: 6
---

These tests cover direct user invocation of BME conversion messages, independent of the deployment lifecycle.

**Important Notes:**
- ACT minting is **epoch-based** (default: every 10 blocks / ~1 minute)
- After `mint-act` tx succeeds, ACT will NOT appear in bank balance immediately
- Check `akash query bme vault-state` to see pending state changes
- Wait for epoch, then check `akash query bank balances` for ACT

**Command Reference:**
```bash
# Mint ACT (AKT → ACT)
akash tx bme mint-act <amount>uakt --from <wallet> -y

# Burn ACT (ACT → AKT)
akash tx bme burn-act <amount>uact --from <wallet> -y

# Check status
akash query bme status
akash query bme vault-state
```

---

### Test 5.1: MsgMintACT - Direct AKT to ACT Conversion

**Objective:** Verify user can directly convert AKT to ACT without creating a deployment

**User Actions:**
1. Create new wallet, fund with 500 AKT (from faucet: https://faucet.dev.akash.pub)
2. Record initial state:
   ```bash
   akash query bank balances <user-address>
   akash query bme vault-state
   akash query oracle prices | head -n 15
   ```
3. Execute direct MsgMintACT:
   ```bash
   akash tx bme mint-act 250000000uakt --from <wallet> -y
   ```
4. Check vault state immediately (AKT should be there):
   ```bash
   akash query bme vault-state
   ```
5. Wait for epoch (~1 minute), then check bank balance:
   ```bash
   sleep 60
   akash query bank balances <user-address>
   ```

**Expected Results:**
- Immediately: AKT transferred to vault, `vault-state.balances.uakt` ↑
- After epoch: 
  - User AKT balance decreased by 250 AKT
  - User ACT balance increased by (250 × oracle_price) ACT
  - `vault-state.balances.uact` ↑
  - `vault-state.remint_credits` ↑ by 250 AKT
  - `vault-state.total_minted.uact` ↑

---

### Test 5.2: MsgMintACT - Convert to Different Recipient

**Objective:** Verify AKT can be converted to ACT for a different address

**User Actions:**
1. Create Wallet A with AKT (from faucet)
2. Create Wallet B (empty)
3. Check if `--to` flag is supported:
   ```bash
   akash tx bme mint-act -h
   ```
4. If supported, execute MsgMintACT from A with `--to` pointing to B:
   ```bash
   akash tx bme mint-act 150000000uakt --from <wallet-A> --to <wallet-B> -y
   ```
5. Wait for epoch (~1 minute):
   ```bash
   sleep 60
   ```
6. Query both wallets:
   ```bash
   akash query bank balances <wallet-A>
   akash query bank balances <wallet-B>
   ```

**Expected Results:**
- Wallet A: AKT decreased by 150
- Wallet A: ACT unchanged (still 0)
- Wallet B: ACT balance = (150 × oracle_price) ACT
- BME state updated correctly

**Note:** If `--to` flag not available, ACT goes to sender's address only.

---

### Test 5.3: MsgBurnACT - Direct ACT to AKT Conversion

**Objective:** Verify user can directly convert ACT back to AKT

**User Actions:**
1. Start with wallet that has ACT balance (from Test 5.1 or deployment refund)
2. Record initial state:
   ```bash
   akash query bank balances <user-address>
   akash query bme vault-state
   akash query oracle prices | head -n 15
   ```
   Note: User AKT/ACT balance, RemintCredits, total_minted, Oracle price

3. Execute direct MsgBurnACT:
   ```bash
   akash tx bme burn-act 100000000uact --from <wallet> -y
   ```
4. Wait for epoch (~1 minute):
   ```bash
   sleep 60
   ```
5. Query post-transaction state:
   ```bash
   akash query bank balances <user-address>
   akash query bme vault-state
   ```

**Expected Results:**
- User ACT balance decreased by 100 ACT
- User AKT balance increased by (100 / P_current) AKT
- OutstandingACT decreased by 100 ACT
- RemintCredits decreased (if sufficient) OR total_minted.uakt increased (if shortfall)

---

### Test 5.4: MsgBurnACT - Convert to Different Recipient

**Objective:** Verify ACT can be converted to AKT for a different address

**User Actions:**
1. Wallet A has ACT balance, minimal AKT
2. Wallet B has 0 ACT, 0 AKT
3. Execute MsgBurnACT from A with `--to` pointing to B:
   ```bash
   akash tx bme burn-act 50000000uact --from <wallet-A> --to <wallet-B> -y
   ```
4. Wait for epoch (~1 minute):
   ```bash
   sleep 60
   ```
5. Query both wallets:
   ```bash
   akash query bank balances <wallet-A>
   akash query bank balances <wallet-B>
   ```

**Expected Results:**
- Wallet A: ACT decreased by 50, AKT unchanged
- Wallet B: AKT balance = (50 / P_current) AKT
- BME state updated correctly

---

### Test 5.5: MsgBurnMint - Generic Swap AKT to ACT

**Objective:** Verify generic BurnMint message works for AKT→ACT

**User Actions:**
1. Wallet with AKT balance
2. Execute MsgBurnMint specifying both denoms:
   ```bash
   akash tx bme burn-mint 200000000uakt --denom-to-mint uact --from <wallet> -y
   ```
3. Wait for epoch (~1 minute):
   ```bash
   sleep 60
   ```
4. Verify same behavior as MsgMintACT:
   ```bash
   akash query bank balances <user-address>
   akash query bme vault-state
   ```

**Expected Results:**
- Functionally identical to MsgMintACT
- ACT minted = 200 AKT × oracle_price
- Vault state updated correctly

---

### Test 5.6: MsgBurnMint - Generic Swap ACT to AKT

**Objective:** Verify generic BurnMint message works for ACT→AKT

**User Actions:**
1. Wallet with ACT balance
2. Execute MsgBurnMint specifying both denoms:
   ```bash
   akash tx bme burn-mint 100000000uact --denom-to-mint uakt --from <wallet> -y
   ```
3. Wait for epoch (~1 minute):
   ```bash
   sleep 60
   ```
4. Verify same behavior as MsgBurnACT:
   ```bash
   akash query bank balances <user-address>
   akash query bme vault-state
   ```

**Expected Results:**
- Functionally identical to MsgBurnACT
- AKT received = 100 ACT / oracle_price
- Vault state updated correctly

---

### Test 5.7: Pre-Fund ACT Then Create Deployment

**Objective:** Verify user can pre-fund ACT balance and later use it for deployment

**User Actions:**
1. Create wallet with AKT (500 AKT from faucet)
2. Convert 250 AKT → ACT via MsgMintACT:
   ```bash
   akash tx bme mint-act 250000000uakt --from <wallet> -y
   sleep 60
   ```
3. Verify user has ~250 AKT and ACT balance:
   ```bash
   akash query bank balances <user-address>
   ```
4. Create deployment using the pre-funded ACT (see Category 1 for full workflow):
   ```bash
   akash tx deployment create deploy.yml --deposit 50000000uact --from <wallet> -y
   ```
5. Verify deployment uses existing ACT balance

**Expected Results:**
- Deployment creation draws from existing ACT
- No additional AKT→ACT conversion at deployment time
- Two-step funding workflow works correctly

**Note:** This test validates a new user workflow enabled by direct messages.

---

### Test 5.8: Partial ACT Withdrawal Without Closing Deployment

**Objective:** Verify user can withdraw excess ACT while deployment runs

**User Actions:**
1. Create deployment with large ACT balance
2. While deployment is running, execute MsgBurnACT for portion of unused ACT:
   ```bash
   akash tx bme burn-act 25000000uact --from <wallet> -y
   ```
3. Wait for epoch:
   ```bash
   sleep 60
   ```
4. Verify:
   ```bash
   akash query bank balances <user-address>
   akash query market lease list --owner <user-address>
   ```

**Expected Results:**
- Deployment continues running
- User receives AKT
- Remaining ACT still available for deployment
- Partial withdrawal successful

---

### Test 5.9: Input Validation - Invalid Owner Address

**Objective:** Verify proper error on invalid owner address

**User Actions:**
1. Attempt MsgMintACT with malformed owner address:
   ```bash
   akash tx bme mint-act 100000000uakt --from invalid_address -y
   ```
2. Observe failure

**Expected Results:**
- Error: `ErrInvalidAddress: invalid owner address` (or similar)
- No state changes
- Transaction rejected at validation

---

### Test 5.10: Input Validation - Invalid To Address

**Objective:** Verify proper error on invalid recipient address

**User Actions:**
1. Attempt MsgMintACT with valid owner but malformed `to` address:
   ```bash
   akash tx bme mint-act 100000000uakt --from <wallet> --to invalid_address -y
   ```
2. Observe failure

**Expected Results:**
- Error: `ErrInvalidAddress: invalid to address` (or similar)
- No state changes

---

### Test 5.11: Input Validation - Invalid Coins

**Objective:** Verify proper error on invalid coin specification

**User Actions:**
1. Attempt MsgMintACT with invalid coins (negative, zero, malformed denom):
   ```bash
   akash tx bme mint-act 0uakt --from <wallet> -y
   akash tx bme mint-act -100uakt --from <wallet> -y
   ```
2. Observe failure

**Expected Results:**
- Error: `ErrInvalidCoins: invalid coins` (or similar)
- No state changes

---

### Test 5.12: Input Validation - Invalid Swap Route

**Objective:** Verify rejection of unsupported token pairs

**User Actions:**
1. Attempt MsgBurnMint with unsupported denom combination:
   ```bash
   akash tx bme burn-mint 100000000uusdc --denom-to-mint uact --from <wallet> -y
   ```
2. Observe failure

**Expected Results:**
- Error: `ErrInvalidDenom: invalid swap route` (or similar)
- Only AKT↔ACT swaps allowed

---

### Test 5.13: MsgMintACT During Circuit Breaker Halt

**Objective:** Verify direct AKT→ACT blocked during circuit breaker

**Precondition:** Circuit breaker states must be initiated by Akash Core team. Coordinate with the team before running this test.

**User Actions:**
1. Verify circuit breaker is active:
   ```bash
   akash query bme status
   ```
   Confirm: `status: mint_status_halt_cr` and `mints_allowed: false`

2. Attempt MsgMintACT:
   ```bash
   akash tx bme mint-act 100000000uakt --from <wallet> -y
   ```
3. Observe failure

**Expected Results:**
- Error: `ErrCircuitBreakerActive` (or similar)
- AKT→ACT blocked (same as deployment flow)
- User's AKT unchanged

---

### Test 5.14: MsgBurnACT During Circuit Breaker Halt

**Objective:** Verify ACT→AKT still works during circuit breaker (settlements must continue)

**Precondition:** Circuit breaker states must be initiated by Akash Core team. Coordinate with the team before running this test.

**User Actions:**
1. Ensure user has ACT balance (from prior testing)
2. Verify circuit breaker is active:
   ```bash
   akash query bme status
   ```
   Confirm: `status: mint_status_halt_cr` and `mints_allowed: false` but `refunds_allowed: true`

3. Attempt MsgBurnACT:
   ```bash
   akash tx bme burn-act 50000000uact --from <wallet> -y
   ```
4. Wait for epoch:
   ```bash
   sleep 60
   ```
5. Observe result:
   ```bash
   akash query bank balances <user-address>
   ```

**Expected Results:**
- MsgBurnACT **should succeed** (ACT→AKT must continue for settlements)
- User receives AKT
- Only new ACT minting is blocked, not ACT burning

**Critical Verification:**
- This confirms asymmetric circuit breaker behavior
- Providers/users can still exit ACT positions during halt

---

### Test 5.15: LedgerRecordID Verification

**Objective:** Verify operations are tracked and can be verified through vault-state

**User Actions:**
1. Record initial vault state:
   ```bash
   akash query bme vault-state
   ```
2. Execute MsgMintACT:
   ```bash
   akash tx bme mint-act 100000000uakt --from <wallet> -y
   ```
3. Wait for epoch:
   ```bash
   sleep 60
   ```
4. Verify operation through vault-state changes:
   ```bash
   akash query bme vault-state
   ```

**Expected Results:**
- Transaction succeeds
- Vault-state reflects the operation after epoch
- `total_minted.uact` increased
- `remint_credits` increased
- Bank balance shows new ACT

**Note:** Direct ledger record queries are not available via CLI. Verify operation through vault-state changes and bank balance updates.

---

### Test 5.16: Consecutive Direct Operations

**Objective:** Verify multiple direct operations work correctly in sequence

**User Actions:**
1. Start with wallet funded with AKT (500 AKT from faucet)
2. Execute operations in sequence, waiting for epoch between each:
   ```bash
   # Operation 1: MsgMintACT 200 AKT → ACT
   akash tx bme mint-act 200000000uakt --from <wallet> -y
   sleep 60
   akash query bank balances <user-address>
   
   # Operation 2: MsgMintACT 100 AKT → ACT
   akash tx bme mint-act 100000000uakt --from <wallet> -y
   sleep 60
   akash query bank balances <user-address>
   
   # Operation 3: MsgBurnACT 50 ACT → AKT
   akash tx bme burn-act 50000000uact --from <wallet> -y
   sleep 60
   akash query bank balances <user-address>
   
   # Operation 4: MsgMintACT 50 AKT → ACT
   akash tx bme mint-act 50000000uakt --from <wallet> -y
   sleep 60
   akash query bank balances <user-address>
   ```
3. Record final state:
   ```bash
   akash query bank balances <user-address>
   akash query bme vault-state
   ```

**Expected Results:**
- Each operation independent and correct
- Running totals accurate
- Final state fully reconciled:
  - AKT decreased by net minted amount (200 + 100 + 50 - burn_return)
  - ACT balance reflects net: minted ACT - 50 ACT burned
  - Vault state reflects cumulative operations