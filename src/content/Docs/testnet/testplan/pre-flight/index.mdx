---
categories: ["Testnet"]
tags: ["Testnet", "BME", "Testing", "Pre-Flight"]
title: "Pre-Flight Health Checks"
linkTitle: "Pre-Flight Health Checks"
description: "BME module pre-flight health checks and baseline verification"
weight: 1
---

Before running functional tests, verify the BME module and dependencies are healthy. These checks establish a baseline and confirm the testnet is ready for testing.

---

### Test 0.1: Node and Network Connectivity

**Objective:** Verify testnet node is accessible and synced

**User Actions:**
1. Check node status:
   ```bash
   akash status
   ```
2. Verify node is synced (catching_up: false)
3. Note current block height

**Expected Results:**
- Node responds
- `catching_up: false`
- Block height advancing

---

### Test 0.2: BME Module Enabled

**Objective:** Verify BME module is loaded and responding

**User Actions:**
1. Query BME params:
   ```bash
   akash query bme params
   ```
2. Verify response includes expected parameters

**Expected Results:**
- Query succeeds (no "unknown query path" error)
- Returns: CircuitBreakerWarnThreshold, CircuitBreakerHaltThreshold, MinEpochBlocks, EpochBlocksBackoff

---

### Test 0.3: Oracle Health Check

**Objective:** Verify oracle is providing AKT/USD price feeds with recent timestamps

**Important Note:** The oracle module stores prices using the **base denom** `akt`, not the micro-denom `uakt`. The `--asset-denom` flag, if used, must specify `akt` — using `uakt` or `uact` will return empty results.

**User Actions:**
1. Query oracle prices (pipe through `head` to limit verbose output):
   ```bash
   akash query oracle prices | head -n 50
   ```
2. Examine the output — confirm price entries exist for `denom: akt` with `base_denom: usd`
3. Check the `timestamp` field on the most recent price entry (first entry in output)
4. Compare the timestamp against current time — it should be within 60 seconds:
   ```bash
   date -u +"%Y-%m-%dT%H:%M:%S"
   ```
5. Verify the price value is reasonable (e.g., AKT ~$0.30-$5.00 range depending on market)

**Expected Results:**
- Oracle returns price entries (prices list is NOT empty)
- Entries show `denom: akt` and `base_denom: usd`
- Price value is a reasonable AKT/USD value (non-zero, non-negative)
- Most recent timestamp is within 60 seconds of current UTC time

**If This Test Fails:**
- Empty results → Oracle price feeder may not be running
- Stale timestamps (>60s old) → Price feeder may have stopped submitting
- Unreasonable prices → Check Pyth feed ID configuration

---

### Test 0.4: BME State Baseline

**Objective:** Record initial BME vault state for comparison during testing

**User Actions:**
1. Query full BME vault state:
   ```bash
   akash query bme vault-state
   ```
2. Record baseline values:
   - Balances (VaultAKT)
   - TotalBurned
   - TotalMinted
   - RemintCredits

**Expected Results:**
- Query succeeds
- All fields returned (may be zero on fresh testnet)
- Document baseline for later comparison

---

### Test 0.5: Collateral Ratio Check

**Objective:** Verify collateral ratio calculation is working

**User Actions:**
1. Query BME status (collateral ratio is included in output):
   ```bash
   akash query bme status
   ```
2. Locate the `collateral_ratio` field in the response

**Expected Results:**
- `collateral_ratio` field is present with a decimal value
- On fresh testnet with no activity, may return `0.000000000000000000`
- Non-error response confirms module is calculating correctly

**Example output:**
```yaml
collateral_ratio: "0.950000000000000000"
halt_threshold: "0.900000000000000000"
mints_allowed: true
...
```

---

### Test 0.6: Mint Status Check

**Objective:** Verify BME mint status is Healthy (required for most testing)

**User Actions:**
1. Query BME status:
   ```bash
   akash query bme status
   ```
2. Check the `status` field and related flags

**Example Output:**
```yaml
collateral_ratio: "0.999328857700195767"
halt_threshold: "0.900000000000000000"
mints_allowed: true
refunds_allowed: true
status: mint_status_healthy
warn_threshold: "0.950000000000000000"
```

**Expected Results:**
- `status`: `mint_status_healthy` (required to proceed with most tests)
- `mints_allowed`: `true`
- `refunds_allowed`: `true`
- `warn_threshold`: `0.95` (status changes to warning below this)
- `halt_threshold`: `0.90` (mints halt below this)

**If status is NOT `mint_status_healthy`:**
- `mint_status_warning`: Collateralization Ratio dropped below 0.95 — investigate
- `mint_status_halt_cr`: Collateralization Ratio dropped below 0.90 — mints blocked, investigate before proceeding
- `mint_status_halt_oracle`: Oracle failure — investigate oracle health (Test 0.3)

---

### Test 0.7: Token Supply Baseline

**Objective:** Record token supplies for inflation tracking

**User Actions:**
1. Query total AKT supply:
   ```bash
   akash query bank total --denom uakt
   ```
2. Query total ACT supply (OutstandingACT):
   ```bash
   akash query bank total --denom uact
   ```
3. Document baseline values

**Expected Results:**
- AKT supply returned (note for inflation tracking in later tests)
- ACT supply returned (may be 0 on fresh testnet)

---

### Test 0.8: Vault State Baseline (Pending Operations Check)

**Objective:** Record vault state baseline and verify no unexpected pending operations

**Note:** There is no direct `pending-records` CLI query. Pending operations are inferred by comparing vault-state before and after operations, and by observing state changes across epoch boundaries.

**User Actions:**
1. Query current vault state:
   ```bash
   akash query bme vault-state
   ```
2. Record the current values as a baseline
3. Query again after ~1-2 minutes (one epoch) to verify state is stable:
   ```bash
   sleep 90
   akash query bme vault-state
   ```

**Expected Results:**
- Vault state query succeeds
- If vault state is changing unexpectedly between queries (without you initiating operations), there may be stale operations from prior testing — investigate before proceeding
- Stable state indicates clean baseline for testing

---

### Test 0.9: Test Wallet Setup

**Objective:** Prepare test wallet with AKT for subsequent tests

**User Actions:**
1. Create a new test wallet:
   ```bash
   akash keys add test-account
   ```
   **Important:** Save the mnemonic phrase securely

2. Note the wallet address from output

3. Fund from faucet:
   - Visit: https://faucet.dev.akash.pub
   - Testnet faucet provides **500 AKT** per request

4. Verify balance:
   ```bash
   akash query bank balances <test-wallet-address>
   ```

**Expected Results:**
- Wallet created successfully
- After faucet: balance shows `500000000uakt` (500 AKT)
- No ACT balance initially (`uact` not listed)

---

### Test 0.10: Provider Availability

**Objective:** Verify at least one provider is available for deployment tests

**User Actions:**
1. Query active providers:
   ```bash
   akash query provider list
   ```
2. Verify at least one provider is online

**Expected Results:**
- At least one provider listed
- Provider status indicates availability
- If no providers, deployment tests (Category 1-3) cannot proceed